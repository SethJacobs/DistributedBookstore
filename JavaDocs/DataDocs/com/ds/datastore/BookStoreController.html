<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.8) on Wed Jul 28 12:25:06 EDT 2021 -->
<title>BookStoreController</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-07-28">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BookStoreController";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.ds.datastore</a></div>
<h2 title="Class BookStoreController" class="title">Class BookStoreController</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.ds.datastore.BookStoreController</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@RestController
public class <span class="typeNameLabel">BookStoreController</span>
extends java.lang.Object</pre>
<div class="block">Controller for BookStores allows CRUD Operations for a Book Store in the network</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="BookModelAssembler.html" title="class in com.ds.datastore">BookModelAssembler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bookModelAssembler">bookModelAssembler</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="BookRepository.html" title="interface in com.ds.datastore">BookRepository</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bookRepository">bookRepository</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="BookStoreModelAssembler.html" title="class in com.ds.datastore">BookStoreModelAssembler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bookStoreModelAssembler">bookStoreModelAssembler</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hubUrl">hubUrl</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#id">id</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="Leader.html" title="class in com.ds.datastore">Leader</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#leader">leader</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.slf4j.Logger</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#logger">logger</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="ServerMap.html" title="class in com.ds.datastore">ServerMap</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#map">map</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="BookStoreRepository.html" title="interface in com.ds.datastore">BookStoreRepository</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeRepository">storeRepository</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#url">url</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="Utilities.html" title="class in com.ds.datastore">Utilities</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#utilities">utilities</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(com.ds.datastore.BookStoreModelAssembler,com.ds.datastore.BookModelAssembler,com.ds.datastore.BookRepository,com.ds.datastore.BookStoreRepository,com.ds.datastore.ServerMap,com.ds.datastore.Leader,com.ds.datastore.Utilities)">BookStoreController</a></span>&#8203;(<a href="BookStoreModelAssembler.html" title="class in com.ds.datastore">BookStoreModelAssembler</a>&nbsp;bookStoreModelAssembler,
                   <a href="BookModelAssembler.html" title="class in com.ds.datastore">BookModelAssembler</a>&nbsp;bookModelAssembler,
                   <a href="BookRepository.html" title="interface in com.ds.datastore">BookRepository</a>&nbsp;bookRepository,
                   <a href="BookStoreRepository.html" title="interface in com.ds.datastore">BookStoreRepository</a>&nbsp;storeRepository,
                   <a href="ServerMap.html" title="class in com.ds.datastore">ServerMap</a>&nbsp;map,
                   <a href="Leader.html" title="class in com.ds.datastore">Leader</a>&nbsp;leader,
                   <a href="Utilities.html" title="class in com.ds.datastore">Utilities</a>&nbsp;utilities)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addServer(java.lang.String,java.lang.String)">addServer</a></span>&#8203;(java.lang.String&nbsp;json,
         java.lang.String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Method for hub to call when new server was added to the network</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected org.springframework.http.ResponseEntity&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteBookStore(java.lang.Long)">deleteBookStore</a></span>&#8203;(java.lang.Long&nbsp;storeID)</code></th>
<td class="colLast">
<div class="block">Delete a Book store
 This Method will delete the Book store from its host server
 as well as remove it from the network and delete any books that were in it</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteFromMap(java.lang.String)">deleteFromMap</a></span>&#8203;(java.lang.String&nbsp;json)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected org.springframework.hateoas.CollectionModel&lt;org.springframework.hateoas.EntityModel&lt;<a href="Book.html" title="class in com.ds.datastore">Book</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAllBooksFromBookStores(java.util.List)">getAllBooksFromBookStores</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Gets all the books from specific Book store's</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAndParseBookStore(java.lang.String)">getAndParseBookStore</a></span>&#8203;(java.lang.String&nbsp;address)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected org.springframework.hateoas.CollectionModel&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBookStores(java.util.List)">getBookStores</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;id)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private java.lang.Long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLeader()">getLeader</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected org.springframework.http.ResponseEntity&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newBookStore(com.ds.datastore.BookStore)">newBookStore</a></span>&#8203;(<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&nbsp;bookStore)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected org.springframework.http.ResponseEntity&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#one(java.lang.Long)">one</a></span>&#8203;(java.lang.Long&nbsp;storeID)</code></th>
<td class="colLast">
<div class="block">Method to get one Book store from the server</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ping()">ping</a></span>()</code></th>
<td class="colLast">
<div class="block">Method for server health check</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#postToHub(com.ds.datastore.BookStore)">postToHub</a></span>&#8203;(<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&nbsp;bookStore)</code></th>
<td class="colLast">
<div class="block">Helper method to post a Book store and its information to the hub</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private java.util.HashMap&lt;java.lang.Long,&#8203;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reclaimMap()">reclaimMap</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#registerWithHub()">registerWithHub</a></span>()</code></th>
<td class="colLast">
<div class="block">Helper method which tells the hub the Book stores id and address and allows it to be connected to the network</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restartChangedOrNew()">restartChangedOrNew</a></span>()</code></th>
<td class="colLast">
<div class="block">If restarted a server gets the new and updated map back from the hub
 and gets the current leader from the hub
 Then checks to see if current address is same as the address originally registered with the hub and makes
 the necessary changes</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLeader(java.lang.Long)">setLeader</a></span>&#8203;(java.lang.Long&nbsp;leader)</code></th>
<td class="colLast">
<div class="block">sets the leader  method would be called by the hub</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected <a href="BookStore.html" title="class in com.ds.datastore">BookStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateBookStore(com.ds.datastore.BookStore,java.lang.Long)">updateBookStore</a></span>&#8203;(<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&nbsp;newBookStore,
               java.lang.Long&nbsp;storeID)</code></th>
<td class="colLast">
<div class="block">Method to update information of a Book store</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="bookModelAssembler">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bookModelAssembler</h4>
<pre>private final&nbsp;<a href="BookModelAssembler.html" title="class in com.ds.datastore">BookModelAssembler</a> bookModelAssembler</pre>
</li>
</ul>
<a id="bookStoreModelAssembler">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bookStoreModelAssembler</h4>
<pre>private final&nbsp;<a href="BookStoreModelAssembler.html" title="class in com.ds.datastore">BookStoreModelAssembler</a> bookStoreModelAssembler</pre>
</li>
</ul>
<a id="bookRepository">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bookRepository</h4>
<pre>private final&nbsp;<a href="BookRepository.html" title="interface in com.ds.datastore">BookRepository</a> bookRepository</pre>
</li>
</ul>
<a id="storeRepository">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeRepository</h4>
<pre>private final&nbsp;<a href="BookStoreRepository.html" title="interface in com.ds.datastore">BookStoreRepository</a> storeRepository</pre>
</li>
</ul>
<a id="map">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>map</h4>
<pre>private&nbsp;<a href="ServerMap.html" title="class in com.ds.datastore">ServerMap</a> map</pre>
</li>
</ul>
<a id="id">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>id</h4>
<pre>private&nbsp;java.lang.Long id</pre>
</li>
</ul>
<a id="leader">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leader</h4>
<pre>private&nbsp;<a href="Leader.html" title="class in com.ds.datastore">Leader</a> leader</pre>
</li>
</ul>
<a id="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>private&nbsp;org.slf4j.Logger logger</pre>
</li>
</ul>
<a id="utilities">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>utilities</h4>
<pre>private&nbsp;<a href="Utilities.html" title="class in com.ds.datastore">Utilities</a> utilities</pre>
</li>
</ul>
<a id="url">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>url</h4>
<pre>@Value("${application.baseUrl}")
private&nbsp;java.lang.String url</pre>
</li>
</ul>
<a id="hubUrl">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hubUrl</h4>
<pre>@Value("${hub.url}")
private&nbsp;java.lang.String hubUrl</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(com.ds.datastore.BookStoreModelAssembler,com.ds.datastore.BookModelAssembler,com.ds.datastore.BookRepository,com.ds.datastore.BookStoreRepository,com.ds.datastore.ServerMap,com.ds.datastore.Leader,com.ds.datastore.Utilities)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BookStoreController</h4>
<pre>public&nbsp;BookStoreController&#8203;(<a href="BookStoreModelAssembler.html" title="class in com.ds.datastore">BookStoreModelAssembler</a>&nbsp;bookStoreModelAssembler,
                           <a href="BookModelAssembler.html" title="class in com.ds.datastore">BookModelAssembler</a>&nbsp;bookModelAssembler,
                           <a href="BookRepository.html" title="interface in com.ds.datastore">BookRepository</a>&nbsp;bookRepository,
                           <a href="BookStoreRepository.html" title="interface in com.ds.datastore">BookStoreRepository</a>&nbsp;storeRepository,
                           <a href="ServerMap.html" title="class in com.ds.datastore">ServerMap</a>&nbsp;map,
                           <a href="Leader.html" title="class in com.ds.datastore">Leader</a>&nbsp;leader,
                           <a href="Utilities.html" title="class in com.ds.datastore">Utilities</a>&nbsp;utilities)</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="restartChangedOrNew()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restartChangedOrNew</h4>
<pre class="methodSignature">@PostConstruct
public&nbsp;void&nbsp;restartChangedOrNew()
                         throws java.lang.Exception</pre>
<div class="block">If restarted a server gets the new and updated map back from the hub
 and gets the current leader from the hub
 Then checks to see if current address is same as the address originally registered with the hub and makes
 the necessary changes</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not connect to the hub</dd>
</dl>
</li>
</ul>
<a id="registerWithHub()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerWithHub</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;registerWithHub()
                      throws java.lang.Exception</pre>
<div class="block">Helper method which tells the hub the Book stores id and address and allows it to be connected to the network</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not create connection</dd>
</dl>
</li>
</ul>
<a id="reclaimMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reclaimMap</h4>
<pre class="methodSignature">private&nbsp;java.util.HashMap&lt;java.lang.Long,&#8203;java.lang.String&gt;&nbsp;reclaimMap()
                                                                     throws java.lang.Exception</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The map of server addresses and their id's from the hub</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not connect to the hub</dd>
</dl>
</li>
</ul>
<a id="getLeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLeader</h4>
<pre class="methodSignature">private&nbsp;java.lang.Long&nbsp;getLeader()
                          throws java.lang.Exception</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the id of the leader i.e the server to handle batch requests</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not connect to the hub to get the leader</dd>
</dl>
</li>
</ul>
<a id="setLeader(java.lang.Long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLeader</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@PutMapping("/bookstores/{storeID}/leader")
protected&nbsp;void&nbsp;setLeader&#8203;(@RequestBody
                         java.lang.Long&nbsp;leader)</pre>
<div class="block">sets the leader  method would be called by the hub</div>
</li>
</ul>
<a id="newBookStore(com.ds.datastore.BookStore)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newBookStore</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@PostMapping("/bookstores")
protected&nbsp;org.springframework.http.ResponseEntity&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;&nbsp;newBookStore&#8203;(@RequestBody
                                                                                                                   <a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&nbsp;bookStore)
                                                                                                            throws java.lang.Exception</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bookStore</code> - to add to the server</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>entity model of the Book store sent to the server</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if fails to post the server to the hub</dd>
</dl>
</li>
</ul>
<a id="addServer(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addServer</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@PostMapping("/bookstores/{id}")
protected&nbsp;void&nbsp;addServer&#8203;(@RequestBody
                         java.lang.String&nbsp;json,
                         @PathVariable
                         java.lang.String&nbsp;id)</pre>
<div class="block">Method for hub to call when new server was added to the network</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>json</code> - with an id and address of a new server to be added to the map of servers in the network</dd>
</dl>
</li>
</ul>
<a id="one(java.lang.Long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>one</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@GetMapping("/bookstores/{storeID}")
protected&nbsp;org.springframework.http.ResponseEntity&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;&nbsp;one&#8203;(@PathVariable
                                                                                                          java.lang.Long&nbsp;storeID)
                                                                                                   throws java.lang.Exception</pre>
<div class="block">Method to get one Book store from the server</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storeID</code> - of the Book store to get</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an entity model of the Book store</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if no Book store with that ID found</dd>
</dl>
</li>
</ul>
<a id="getBookStores(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBookStores</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@GetMapping("/bookstores")
protected&nbsp;org.springframework.hateoas.CollectionModel&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;&nbsp;getBookStores&#8203;(@RequestParam(required=false)
                                                                                                                        java.util.List&lt;java.lang.String&gt;&nbsp;id)
                                                                                                                 throws java.lang.Exception</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - of Book stores to get</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>entity model of Book stores with the given IDs</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not find server with that ID</dd>
</dl>
</li>
</ul>
<a id="getAndParseBookStore(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAndParseBookStore</h4>
<pre class="methodSignature">private&nbsp;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&nbsp;getAndParseBookStore&#8203;(java.lang.String&nbsp;address)
                                                                         throws java.lang.Exception</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>address</code> - of Book store to get</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>entity model of Book store</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not connect</dd>
</dl>
</li>
</ul>
<a id="getAllBooksFromBookStores(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllBooksFromBookStores</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@GetMapping("/bookstores/books")
protected&nbsp;org.springframework.hateoas.CollectionModel&lt;org.springframework.hateoas.EntityModel&lt;<a href="Book.html" title="class in com.ds.datastore">Book</a>&gt;&gt;&nbsp;getAllBooksFromBookStores&#8203;(@RequestParam(required=false)
                                                                                                                               java.util.List&lt;java.lang.String&gt;&nbsp;id)
                                                                                                                        throws java.lang.Exception</pre>
<div class="block">Gets all the books from specific Book store's</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - of Book store's to get all books from</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>entity model of books</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not connect to a Book store with a given ID</dd>
</dl>
</li>
</ul>
<a id="updateBookStore(com.ds.datastore.BookStore,java.lang.Long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBookStore</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@PutMapping("/bookstores/{storeID}")
protected&nbsp;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&nbsp;updateBookStore&#8203;(@RequestBody
                                    <a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&nbsp;newBookStore,
                                    @PathVariable
                                    java.lang.Long&nbsp;storeID)</pre>
<div class="block">Method to update information of a Book store</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newBookStore</code> - information to change on the old Book store</dd>
<dd><code>storeID</code> - of store to change</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>entity model of updated Book store</dd>
</dl>
</li>
</ul>
<a id="deleteBookStore(java.lang.Long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteBookStore</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@DeleteMapping("/bookstores/{storeID}")
protected&nbsp;org.springframework.http.ResponseEntity&lt;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&gt;&nbsp;deleteBookStore&#8203;(@PathVariable
                                                                                                                      java.lang.Long&nbsp;storeID)
                                                                                                               throws java.lang.Exception</pre>
<div class="block">Delete a Book store
 This Method will delete the Book store from its host server
 as well as remove it from the network and delete any books that were in it</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storeID</code> - of Book store to delete</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>204 no content if successful</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not find Book store with that ID</dd>
</dl>
</li>
</ul>
<a id="deleteFromMap(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFromMap</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@DeleteMapping("/bookstores/map")
protected&nbsp;void&nbsp;deleteFromMap&#8203;(@RequestBody
                             java.lang.String&nbsp;json)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>json</code> - object with id of store to delete from the map of servers</dd>
</dl>
</li>
</ul>
<a id="ping()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ping</h4>
<pre class="methodSignature">@RateLimiter(name="DDoS-stopper")
@GetMapping("/bookstores/{storeID}/ping")
protected&nbsp;boolean&nbsp;ping()</pre>
<div class="block">Method for server health check</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True</dd>
</dl>
</li>
</ul>
<a id="postToHub(com.ds.datastore.BookStore)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>postToHub</h4>
<pre class="methodSignature">private&nbsp;org.springframework.hateoas.EntityModel&lt;<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&gt;&nbsp;postToHub&#8203;(<a href="BookStore.html" title="class in com.ds.datastore">BookStore</a>&nbsp;bookStore)
                                                              throws java.lang.Exception</pre>
<div class="block">Helper method to post a Book store and its information to the hub</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bookStore</code> - to be added to hub</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>entity of Book store to be added</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if can not connect to HUB</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
